/* macOS 主题基础与菜单样式（逐步迁移中） */
:root { --macos-bg: #e5e5e7; }
html, body { height: 100%; }
body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Microsoft Yahei', sans-serif; background: var(--macos-bg); color: #222; margin: 0; }

.macos-theme { height: 100vh; display: flex; flex-direction: column; background-color: #f5f5f5; background-image: linear-gradient(#e0e0e0 1px, transparent 1px), linear-gradient(90deg, #e0e0e0 1px, transparent 1px); background-size: 20px 20px; background-position: -1px -1px; }
/* 恢复旧版 macos.html 的无衬线字体栈（作用域：macOS 主题） */
.macos-theme, .macos-theme * { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }

/* 顶部菜单栏（作用域：.macos-theme） */
.macos-theme .menu-bar {
  height: 22px;
  background-color: rgba(245, 245, 245, 0.9);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid #d1d1d1;
  display: flex;
  align-items: center;
  padding: 0 10px;
  font-size: 12px;
  color: #333;
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 1000;
}
.macos-theme .menu-items { display: flex; gap: 15px; }
.macos-theme .menu-item { padding: 0 5px; cursor: pointer; }
.macos-theme .menu-item:hover { background-color: rgba(0,0,0,0.1); }
.macos-theme .menu-right {
  margin-left: auto; display: flex; align-items: center; gap: 10px;
  color: #333 !important; z-index: 1001; position: relative;
  font-size: 12px; font-weight: 500; text-shadow: 0 0 0 rgba(0,0,0,0);
  background: transparent;
}

/* 主要内容区域 */
.macos-theme .main-content { flex: 1; display: flex; align-items: center; justify-content: center; padding-top: 22px; position: relative; }
.macos-theme .welcome-text { font-size: 16px; color: #333; }
/* 打字机光标样式 */
.macos-theme .welcome-text .typing-cursor { display: inline-block; margin-left: 4px; font-weight: 400; opacity: 1; }

/* 桌面图标 */
.macos-theme .desktop-icons {
  position: absolute;
  top: 50px;
  right: 50px;
  display: flex;
  flex-direction: column;
  gap: 25px;
  align-items: center;
  z-index: 900; /* 保持在窗口之下 */
}
.macos-theme .icon { display: flex; flex-direction: column; align-items: center; width: 80px; cursor: pointer; transition: transform 0.2s ease; }
.macos-theme .icon:hover { transform: scale(1.05); }
.macos-theme .icon img { width: 50px; height: 50px; margin-bottom: 5px; }
.macos-theme .icon-label { font-size: 12px; font-weight: 500; color: #333; text-align: center; background-color: rgba(245,245,245,0.9); padding: 2px 5px; border-radius: 3px; white-space: nowrap; }

/* 便签样式 */
.macos-theme .sticky-note {
  position: absolute;
  top: 30px;
  left: 30px;
  width: 280px;
  height: 280px;
  background-color: #000;
  color: #fff;
  padding: 15px;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
  border-radius: 10px;
  transform: rotate(0deg);
  font-family: 'Inter', 'Arial', sans-serif;
  font-weight: 500;
  font-size: 11px;
  line-height: 1.5;
  transition: transform 0.3s ease;
  z-index: 10;
  cursor: move;
}
.macos-theme .sticky-note:hover { transform: rotate(-2deg); }

/* macOS 窗口样式 */
.macos-theme .macos-window {
  position: absolute;
  width: 400px;
  min-height: 230px;
  background-color: #ffffff;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  z-index: 1000; /* 基线：窗口层级 */
  display: flex;
  flex-direction: column;
  overflow: hidden;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
.macos-theme .window-header {
  height: 32px;
  background-color: #f5f5f5;
  border-bottom: 1px solid #d1d1d1;
  display: flex;
  align-items: center;
  padding: 0 10px;
  cursor: move;
  user-select: none;
}
.macos-theme .window-controls { display: flex; gap: 8px; margin-right: 10px; }
.macos-theme .window-control { width: 12px; height: 12px; border-radius: 50%; background-color: #ccc; cursor: pointer; }
.macos-theme .window-control.close { background-color: #ff5f56; }
.macos-theme .window-control.minimize { background-color: #ffbd2e; }
.macos-theme .window-control.maximize { background-color: #27c93f; }
.macos-theme .window-title { flex: 1; text-align: center; font-size: 13px; color: #333; }
.macos-theme .window-content {
  flex: 1; padding: 12px 20px 20px; font-size: 14px; line-height: 1.5; overflow-y: auto;
  -ms-overflow-style: none; scrollbar-width: none;
}
.macos-theme .window-content::-webkit-scrollbar { display: none; }
.macos-theme .scrollable, .macos-theme .photo-nav-item, .macos-theme .macos-window { -ms-overflow-style: none; scrollbar-width: none; }
.macos-theme .scrollable::-webkit-scrollbar, .macos-theme .photo-nav-item::-webkit-scrollbar, .macos-theme .macos-window::-webkit-scrollbar { display: none; }
.macos-theme .macos-window::-webkit-resizer { display: none; }

/* 底部Dock栏（主题作用域） */
.macos-theme .dock {
  height: auto;
  background-color: rgba(245, 245, 245, 0.8);
  backdrop-filter: blur(10px);
  border: 1px solid #d1d1d1;
  border-radius: 20px;
  display: flex;
  align-items: center;
  padding: 5px; /* 与旧版保持一致 */
  gap: 5px; /* 与旧版保持一致 */
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  z-index: 2001; /* 提升Dock层级，确保可点击 */
  transition: all 0.3s ease;
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: auto;
  justify-content: center;
  min-width: 300px;
}

.macos-theme .dock-icon {
  width: auto; /* 取消固定尺寸，按图片尺寸呈现 */
  height: auto; /* 取消固定尺寸，按图片尺寸呈现 */
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0; /* 旧版未对每个图标额外留白 */
  border-radius: 12px;
  transition: background-color 0.2s ease;
  cursor: pointer;
}

.macos-theme .dock-icon img {
  width: 55px; /* 与旧版一致 */
  height: 55px; /* 与旧版一致 */
  object-fit: contain;
  transition: all 0.3s ease; /* 与旧版一致 */
  display: block;
}

/* 取消背景高亮，以匹配旧版交互 */
.macos-theme .dock-icon:hover { background-color: transparent; }

/* 响应式与旧版一致 */
@media (max-width: 1024px) {
  .macos-theme .dock-icon img { width: 45px; height: 45px; }
}
@media (max-width: 480px) {
  .macos-theme .dock-icon img { width: 35px; height: 35px; }
}

/* mac 风格悬停提示（帮助标签样式） */
.macos-tooltip {
   position: fixed;
   background: #111;
   color: #fff;
   border: 1px solid #333;
   border-radius: 6px;
   box-shadow: 0 8px 20px rgba(0,0,0,0.35);
   padding: 6px 8px;
   font-size: 12px;
   line-height: 1.4;
   max-width: 280px;
   z-index: 3000;
 }
.macos-tooltip::before,
 .macos-tooltip::after {
   content: '';
   position: absolute;
   width: 0; height: 0;
   pointer-events: none;
 }
 .macos-tooltip[data-position="above"]::before {
   top: 100%;
   left: var(--arrow-left, 12px);
   transform: translateX(-50%);
   border-width: 7px;
   border-style: solid;
   border-color: #333 transparent transparent transparent;
 }
 .macos-tooltip[data-position="above"]::after {
   top: 100%;
   left: var(--arrow-left, 12px);
   transform: translateX(-50%);
   border-width: 6px;
   border-style: solid;
   border-color: #111 transparent transparent transparent;
 }
 .macos-tooltip[data-position="below"]::before {
   bottom: 100%;
   left: var(--arrow-left, 12px);
   transform: translateX(-50%);
   border-width: 7px;
   border-style: solid;
   border-color: transparent transparent #333 transparent;
 }
 .macos-tooltip[data-position="below"]::after {
   bottom: 100%;
   left: var(--arrow-left, 12px);
   transform: translateX(-50%);
   border-width: 6px;
   border-style: solid;
   border-color: transparent transparent #111 transparent;
 }
.macos-theme .mac-badge {
  font-size: 11px;
  line-height: 1;
  padding: 2px 8px;
  border-radius: 999px;
  font-weight: 600;
}
.macos-theme .mac-badge-new {
  background: #0A84FF;
  color: #fff;
  border: 1px solid #006AE6;
  box-shadow: 0 2px 6px rgba(10, 132, 255, 0.25);
}
.macos-theme .mac-badge-top {
  background: #5E5CE6;
  color: #fff;
  border: 1px solid #4B4AC2;
  box-shadow: 0 2px 6px rgba(94, 92, 230, 0.25);
}
.macos-theme .mac-badge-hot {
  background: #FF3B30;
  color: #fff;
  border: 1px solid #D62A22;
  box-shadow: 0 2px 6px rgba(255, 59, 48, 0.25);
}
.macos-theme .about-me-content { font-size: 15px; line-height: 1.7; color: #333; }
.macos-theme .about-me-title { font-weight: 600; color: #007aff; margin-bottom: 8px; }
.macos-theme .about-me-list { margin: 0; padding-left: 18px; list-style: disc; }
.macos-theme .about-me-list li { margin: 6px 0; }
.macos-theme .about-me-content .highlight { background: #007aff; color: #ffffff; border-radius: 4px; padding: 0 4px; }
.macos-theme .about-me-content .accent { color: #007aff; font-weight: 600; }
.macos-theme .about-me-content .warn { color: #ff3b30; font-weight: 600; text-decoration: line-through; text-decoration-thickness: 2px; }

/* 移动端顶栏与汉堡菜单 */
.macos-theme .menu-right .hamburger {
  display: none;
}
.macos-theme .menu-right .hamburger svg { width: 18px; height: 18px; }
.macos-theme .menu-right .hamburger line { stroke: #333; stroke-width: 1.5; stroke-linecap: round; }

.macos-theme .mobile-menu {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  display: none;
  z-index: 3000;
}
.macos-theme .mobile-menu.open { display: block; }
.macos-theme .mobile-menu-inner {
  position: absolute;
  top: 0; right: 0; bottom: 0;
  width: 72%;
  max-width: 320px;
  background: rgba(245, 245, 245, 0.8);
  backdrop-filter: blur(10px);
  border-left: 1px solid #d1d1d1;
  border-radius: 16px 0 0 16px;
  box-shadow: -6px 0 14px rgba(0,0,0,0.12);
  display: flex; flex-direction: column;
}
.macos-theme .mobile-menu-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 14px; border-bottom: 1px solid rgba(0,0,0,0.06);
}
.macos-theme .mobile-title { font-weight: 600; color: #333; }
.macos-theme .mobile-close {
  width: 12px; height: 12px; border-radius: 50%; background-color: #ff5f56; cursor: pointer; border: none; padding: 0; display: inline-block;
  color: transparent; font-size: 0; line-height: 0;
}
.macos-theme .mobile-menu-list { list-style: none; margin: 0; padding: 12px; }
.macos-theme .mobile-menu-list li {
  padding: 10px 12px; font-size: 15px; border-radius: 8px; cursor: pointer;
}
.macos-theme .mobile-menu-list li:hover { background: #f5f5f5; }
.macos-theme .mobile-menu-list li.active { color: #0a84ff; }

/* 移动端适配：隐藏桌面图标，仅保留左侧 Apple 与右侧汉堡 */
@media (max-width: 768px) {
  .macos-theme .macos-window[data-mobile="drawer"] {
    position: absolute;
    transform: none !important;
    border-radius: 12px;
    min-height: 0 !important;
  }
  .macos-theme .macos-window[data-mobile="drawer"][data-collapsed="true"] {
    min-height: 32px !important; /* 与最小化一致 */
    background-color: #f5f5f5; /* 与标题栏同色，避免下缘白边 */
    box-shadow: 0 2px 8px rgba(0,0,0,0.08); /* 折叠态阴影更轻，避免中间看起来更暗 */
  }
  .macos-theme .macos-window[data-mobile="drawer"][data-collapsed="true"] .window-header {
    border-bottom: none; /* 折叠态去掉分隔线，防止出现下缘细线 */
  }
  .macos-theme .macos-window[data-mobile="drawer"][data-collapsed="true"] .window-content {
    display: none;
  }
  /* 移动端：便签水平居中（不依赖固定宽度） */
  .macos-theme .sticky-note { left: 50%; transform: translateX(-50%); }
  .macos-theme .sticky-note:hover { transform: translateX(-50%) rotate(-2deg); }
  .macos-theme .desktop-icons { display: none; }
  .macos-theme .menu-items .menu-item:not(:first-child) { display: none; }
  /* 隐藏日期与时间 */
  .macos-theme #current-date, .macos-theme #current-time { display: none; }
  .macos-theme .menu-right .hamburger {
    display: inline-flex; align-items: center; justify-content: center;
    background: transparent; border: none; border-radius: 6px;
    width: 28px; height: 22px; font-size: 14px; cursor: pointer;
  }
}
/* 去重：hover 规则已在上方定义一次，避免重复定义影响维护 */
.macos-theme .menu-right .hamburger svg { width: 18px; height: 18px; }
.macos-theme .menu-right .hamburger circle { stroke: #333; stroke-width: 2.2; stroke-linecap: round; fill: none; }